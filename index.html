<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Globe + Timeline</title>

  <link rel="stylesheet" href="./styles.css" />
  <link href="https://unpkg.com/maplibre-gl@4.7.1/dist/maplibre-gl.css" rel="stylesheet" />
</head>

<body>
  <div id="app">
    <div id="mapContainer">
      <div id="map"></div>

      <!-- Barre chronologie en bas -->
      <div id="timelineBar">
        <div class="timelineHeader">
          <div class="leftHeader">
            <strong>Chronologie</strong>
            <span class="dateBox" id="selectedDate">â€”</span>
          </div>
          <span class="hint">Clique un bloc puis une annÃ©e.</span>
        </div>

        <!-- Recherche -->
        <div class="searchWrap">
          <div class="searchRow">
            <input
              id="searchInput"
              type="text"
              placeholder="Rechercher (ex: seconde guerre mondiale, normandie, berlin)..."
              autocomplete="off"
            />
            <button id="searchBtn" class="searchBtn">Rechercher</button>
            <button id="clearBtn" class="searchBtn secondary">Effacer</button>
            <button id="randomBtn" class="searchBtn tertiary">ðŸŽ² AlÃ©atoire</button>
          </div>

          <div id="suggestions" class="suggestions hidden" aria-label="Suggestions"></div>
        </div>

        <!-- Blocs 100 ans -->
        <div class="centuryRow">
          <div class="centuryLabel">PÃ©riodes</div>
          <div id="centuryBar" class="centuryBar" aria-label="Blocs de 100 ans"></div>
        </div>

        <!-- Frise Ã  points (annÃ©e dans le bloc sÃ©lectionnÃ©) -->
        <div class="yearsRow">
          <div class="yearsLabel">AnnÃ©es (dans le bloc)</div>
          <div id="timelineTrack" class="timelineTrack" aria-label="Frise des annÃ©es"></div>
        </div>
      </div>
    </div>

    <!-- Panneau Ã©vÃ©nements -->
    <div id="eventsPanel" class="collapsed">
      <button id="togglePanel" aria-label="Afficher/Masquer les Ã©vÃ©nements">â¬†</button>
      <div id="eventsList"></div>
    </div>
  </div>

  <!-- Modal vidÃ©o -->
  <div id="videoModal" class="modal hidden" aria-hidden="true">
    <div class="modalBackdrop" id="modalBackdrop"></div>

    <div class="modalContent" role="dialog" aria-modal="true" aria-label="Lecteur vidÃ©o">
      <button class="modalClose" id="modalClose" title="Fermer">âœ•</button>
      <div class="modalFrameWrap">
        <iframe
          id="videoFrame"
          src=""
          title="YouTube video player"
          frameborder="0"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
          allowfullscreen
        ></iframe>
      </div>
    </div>
  </div>

  <script src="https://unpkg.com/maplibre-gl@4.7.1/dist/maplibre-gl.js"></script>
  <script type="module" src="./app.js"></script>
</body>
</html>
