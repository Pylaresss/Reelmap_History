<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Globe + Timeline</title>

  <link rel="stylesheet" href="./styles.css" />
  <link href="https://unpkg.com/maplibre-gl@4.7.1/dist/maplibre-gl.css" rel="stylesheet" />
</head>

<body>
  <div id="app">
    <!-- Carte -->
    <div id="mapContainer">
      <div id="map"></div>

      <!-- Barre chronologie en bas de la carte -->
      <div id="timelineBar">
        <div class="timelineHeader">
          <div class="leftHeader">
            <strong>Chronologie</strong>
            <span class="dateBox" id="selectedDate">—</span>
          </div>
          <span class="hint">Déplace le slider (année) ou recherche une période.</span>
        </div>

        <!-- Recherche + suggestions -->
        <div class="searchWrap">
          <div class="searchRow">
            <input
              id="searchInput"
              type="text"
              placeholder="Rechercher (ex: seconde guerre mondiale, normandie, berlin)..."
              autocomplete="off"
            />
            <button id="searchBtn" class="searchBtn">Rechercher</button>
            <button id="clearBtn" class="searchBtn secondary">Effacer</button>
          </div>

          <div id="suggestions" class="suggestions hidden" aria-label="Suggestions"></div>
        </div>

        <input id="range" type="range" min="0" max="0" step="1" value="0" />
      </div>
    </div>

    <!-- Panneau événements repliable -->
    <div id="eventsPanel" class="collapsed">
      <button id="togglePanel" aria-label="Afficher/Masquer les événements">⬆</button>
      <div id="eventsList"></div>
    </div>
  </div>

  <!-- Modal vidéo -->
  <div id="videoModal" class="modal hidden" aria-hidden="true">
    <div class="modalBackdrop" id="modalBackdrop"></div>

    <div class="modalContent" role="dialog" aria-modal="true" aria-label="Lecteur vidéo">
      <button class="modalClose" id="modalClose" title="Fermer">✕</button>
      <div class="modalFrameWrap">
        <iframe
          id="videoFrame"
          src=""
          title="YouTube video player"
          frameborder="0"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
          allowfullscreen
        ></iframe>
      </div>
    </div>
  </div>

  <script src="https://unpkg.com/maplibre-gl@4.7.1/dist/maplibre-gl.js"></script>
  <script type="module" src="./app.js"></script>
</body>
</html>
